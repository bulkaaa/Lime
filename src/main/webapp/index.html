<!DOCTYPE html>
<html lang="en" ng-app="myApp" >
<head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="styles/style.css" />
    <link rel="stylesheet" href="cart/cart.css" />
    <link rel="stylesheet" href="libs/css/font-awesome.min.css">
</head>
<body >


<script src="libs/jquery-3.2.1.min.js"></script>
<script src="libs/angular.min.js"></script>
<script src="libs/angular-route.min.js"></script>
<script src="libs/angular-cookies.min.js"></script>
<script src="libs/angular-ui-bootstrap-modal.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>


<script src="app.js"></script>

<div ng-include src="'shared/header.html'"></div>

<div class="jumbotron page-container">
    <div ng-view style="height:100%"></div>
</div>


<script type="text/javascript">

    var app = angular.module("myApp", ['ngRoute', 'ngCookies','ui.bootstrap.modal']);
    app.config(function($routeProvider) {
                        $routeProvider
                            .when('/', {
                                templateUrl: 'home/HomeView.html',
                                controller: 'HomeController',
                                controllerAs: 'vm'
                            })
                            .when('/login', {
                                templateUrl: 'account/login/LoginView.html',
                                controller: 'LoginController',
                                controllerAs: 'vm'

                            })
                            .when('/register', {
                                templateUrl: 'account/register/RegisterView.html',
                                controller: 'RegisterController',
                                controllerAs: 'vm'

                            })
                            .when('/edit-account', {
                                templateUrl: 'account/edit/EditAccountView.html'
                            })
                            .when('/reset', {
                                templateUrl: 'account/reset/ResetPasswordView.html'
                            })
                            .when('/cart', {
                                templateUrl: 'cart/CartView.html',
                                controller: 'CartController'
                            })
                    })


    app.run(function($rootScope, $location, $cookies, $http) {
        // keep user logged in after page refresh
        $rootScope.globals = $cookies.getObject('globals') || {};
        if ($rootScope.globals.currentUser) {
            $http.defaults.headers.common['Authorization'] = 'Basic ' + $rootScope.globals.currentUser.authdata;
        }

        $rootScope.$on('$locationChangeStart', function (event, next, current) {
            // redirect to login page if not logged in and trying to access a restricted page
            var restrictedPage = $.inArray($location.path(), ['/login', '/register']) === -1;
            var loggedIn = $rootScope.globals.currentUser;
            if (restrictedPage && !loggedIn) {
                $location.path('/login');
            }
        });
    });


</script>
<script src="home/HomeController.js"></script>
<script src="cart/CartController.js"></script>
<script src="account/login/LoginController.js"></script>
<script src="account/register/RegisterController.js"></script>
<script src="MainController.js"></script>
<script src="app-services/AuthenticationService.js"></script>
<script src="app-services/FlashService.js"></script>
<script src="app-services/UserServiceLocalStorage.js"></script>
<!--<script src="app-services/UserService.js"></script>-->

<div ng-include src="'shared/footer.html'"></div>

</body>
</html>
